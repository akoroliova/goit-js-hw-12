{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst apiKey = '42062449-cea48752956c1d9094f31db98';\nconst searchForm = document.querySelector('form.search-form');\nconst loaderElement = document.querySelector('.loader');\nconst imagesList = document.querySelector('.gallery');\nconst lightboxInstance = new SimpleLightbox('.gallery .gallery-link', {\n  captions: true,\n  captionsData: 'alt',\n  captionPosition: 'bottom',\n});\n\nfunction handleSubmit(event) {\n  event.preventDefault();\n  showLoader();\n  imagesList.innerHTML = '';\n\n  let imagesResultingArray = [];\n\n  const userQuery = encodeURIComponent(\n    event.target.elements['search-field'].value\n  );\n\n  function fetchImages() {\n    return fetch(\n      `https://pixabay.com/api/?key=${apiKey}&q=${userQuery}&image_type=\"photo\"&orientation=\"horizontal\"&safesearch=true`\n    ).then(response => {\n      if (!response.ok) {\n        throw new Error(response.status);\n      }\n      return response.json();\n    });\n  }\n\n  fetchImages()\n    .then(data => {\n      if (data.total === 0) {\n        hideLoader();\n        iziToast.error({\n          position: 'topRight',\n          title: '',\n          message:\n            'Sorry, there are no images matching your search query. Please, try again!',\n        });\n      } else {\n        const imagesInitialArray = data.hits;\n\n        imagesResultingArray = imagesInitialArray.map(eachObject => {\n          return {\n            href: eachObject.largeImageURL,\n            src: eachObject.webformatURL,\n            alt: eachObject.tags,\n            likes: eachObject.likes,\n            views: eachObject.views,\n            comments: eachObject.comments,\n            downloads: eachObject.downloads,\n          };\n        });\n        hideLoader();\n        renderImages(imagesResultingArray);\n        searchForm.reset();\n      }\n    })\n    .catch(error => {\n      console.log(error);\n      hideLoader();\n    });\n\n  function renderImages(imagesResultingArray) {\n    const liElements = imagesResultingArray\n      .map(image => {\n        return `<li><a class=\"gallery-link\" href=\"${image.href}\"><img class=\"gallery-image\" src=\"${image.src}\" alt=\"${image.alt}\" title=\"${image.alt}\" likes=\"${image.likes} views=\"${image.views} comments=\"${image.comments} downloads=\"${image.downloads}\" /></a></li>`;\n      })\n      .join('');\n    imagesList.insertAdjacentHTML('beforeend', liElements);\n\n    lightboxInstance.refresh();\n  }\n}\nsearchForm.addEventListener('submit', handleSubmit);\n\nfunction showLoader() {\n  loaderElement.style.display = 'block';\n}\nfunction hideLoader() {\n  loaderElement.style.display = 'none';\n}\n"],"names":["apiKey","searchForm","loaderElement","imagesList","lightboxInstance","SimpleLightbox","handleSubmit","event","showLoader","imagesResultingArray","userQuery","fetchImages","response","data","hideLoader","iziToast","eachObject","renderImages","error","liElements","image"],"mappings":"6vBAKA,MAAMA,EAAS,qCACTC,EAAa,SAAS,cAAc,kBAAkB,EACtDC,EAAgB,SAAS,cAAc,SAAS,EAChDC,EAAa,SAAS,cAAc,UAAU,EAC9CC,EAAmB,IAAIC,EAAe,yBAA0B,CACpE,SAAU,GACV,aAAc,MACd,gBAAiB,QACnB,CAAC,EAED,SAASC,EAAaC,EAAO,CAC3BA,EAAM,eAAc,EACpBC,IACAL,EAAW,UAAY,GAEvB,IAAIM,EAAuB,CAAA,EAE3B,MAAMC,EAAY,mBAChBH,EAAM,OAAO,SAAS,cAAc,EAAE,KAC1C,EAEE,SAASI,GAAc,CACrB,OAAO,MACL,gCAAgCX,CAAM,MAAMU,CAAS,8DAC3D,EAAM,KAAKE,GAAY,CACjB,GAAI,CAACA,EAAS,GACZ,MAAM,IAAI,MAAMA,EAAS,MAAM,EAEjC,OAAOA,EAAS,MACtB,CAAK,CACF,CAEDD,EAAa,EACV,KAAKE,GAAQ,CACRA,EAAK,QAAU,GACjBC,IACAC,EAAS,MAAM,CACb,SAAU,WACV,MAAO,GACP,QACE,2EACZ,CAAS,IAIDN,EAF2BI,EAAK,KAEU,IAAIG,IACrC,CACL,KAAMA,EAAW,cACjB,IAAKA,EAAW,aAChB,IAAKA,EAAW,KAChB,MAAOA,EAAW,MAClB,MAAOA,EAAW,MAClB,SAAUA,EAAW,SACrB,UAAWA,EAAW,SAClC,EACS,EACDF,IACAG,EAAaR,CAAoB,EACjCR,EAAW,MAAK,EAExB,CAAK,EACA,MAAMiB,GAAS,CACd,QAAQ,IAAIA,CAAK,EACjBJ,GACN,CAAK,EAEH,SAASG,EAAaR,EAAsB,CAC1C,MAAMU,EAAaV,EAChB,IAAIW,GACI,qCAAqCA,EAAM,IAAI,qCAAqCA,EAAM,GAAG,UAAUA,EAAM,GAAG,YAAYA,EAAM,GAAG,YAAYA,EAAM,KAAK,WAAWA,EAAM,KAAK,cAAcA,EAAM,QAAQ,eAAeA,EAAM,SAAS,eACpP,EACA,KAAK,EAAE,EACVjB,EAAW,mBAAmB,YAAagB,CAAU,EAErDf,EAAiB,QAAO,CACzB,CACH,CACAH,EAAW,iBAAiB,SAAUK,CAAY,EAElD,SAASE,GAAa,CACpBN,EAAc,MAAM,QAAU,OAChC,CACA,SAASY,GAAa,CACpBZ,EAAc,MAAM,QAAU,MAChC"}