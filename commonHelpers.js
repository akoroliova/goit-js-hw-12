import{S as I,i as c,a as S}from"./assets/vendor-da186403.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))n(t);new MutationObserver(t=>{for(const o of t)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function s(t){const o={};return t.integrity&&(o.integrity=t.integrity),t.referrerPolicy&&(o.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?o.credentials="include":t.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(t){if(t.ep)return;t.ep=!0;const o=s(t);fetch(t.href,o)}})();const $="42062449-cea48752956c1d9094f31db98",g=document.querySelector("form.search-form"),f=document.querySelector(".loader"),y=document.querySelector(".gallery"),h=document.querySelector(".load-more-div"),k=document.querySelector(".load-more-div button"),q=new I(".gallery .gallery-link",{captions:!0,captionsData:"alt",captionPosition:"bottom"}),p=15;let d,i=1;async function P(r){r.preventDefault();const e=r.target.elements["search-field"].value;if(e.trim().length!==0){y.innerHTML="",i=1,L(),w(),d=encodeURIComponent(e);try{const s=await v(d),n=s.data.totalHits;if(n===0)a(),c.error({position:"topRight",title:"",message:"Sorry, there are no images matching your search query. Please, try again!"});else{a();const t=s.data.hits,o=m(t);u(o),g.reset(),n>p&&b()}}catch(s){console.log(s),a()}}}g.addEventListener("submit",P);async function A(r){r.preventDefault(),L(),w();try{i+=1;const e=await v(d),s=e.data.totalHits,n=Math.ceil(s/p);if(i>=n)return a(),c.error({position:"topRight",message:"We're sorry, but you've reached the end of search results."});if(i===n){a();const t=e.data.hits,o=m(t);return u(o),c.error({position:"topRight",message:"We're sorry, but you've reached the end of search results."})}else{a(),b();const t=e.data.hits,o=m(t);u(o);const R={top:document.querySelector(".gallery-card").getBoundingClientRect().height*2,behavior:"smooth"};window.scrollBy(R)}}catch(e){console.log(e)}}k.addEventListener("click",A);async function v(r){try{return await S.get(`https://pixabay.com/api/?key=${$}&q=${r}&image_type=photo&orientation=horizontal&safesearch=true&per_page=${p}&page=${i}`)}catch(e){throw new Error(e)}}function u(r){const e=r.map(s=>`<li class="gallery-card"><a class="gallery-link" href="${s.href}"><img class="gallery-image" src="${s.src}" alt="${s.alt}" /><div class="image-stats-card"><div class="image-stats-block"><p>Likes</p>${s.likes}</div><div class="image-stats-block"><p>Views</p>${s.views}</div><div class="image-stats-block"><p>Comments</p>${s.comments}</div><div class="image-stats-block"><p>Downloads</p>${s.downloads}</div></div></a></li>`).join("");y.insertAdjacentHTML("beforeend",e),q.refresh()}function m(r){return r.map(e=>({href:e.largeImageURL,src:e.webformatURL,alt:e.tags,likes:e.likes,views:e.views,comments:e.comments,downloads:e.downloads}))}function w(){f.style.display="block"}function a(){f.style.display="none"}function b(){h.style.display="flex"}function L(){h.style.display="none"}
//# sourceMappingURL=commonHelpers.js.map
